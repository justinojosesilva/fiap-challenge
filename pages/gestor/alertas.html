<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alertas Inteligentes | Sistema de Gamificação</title>
    <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@400;600&family=Nunito:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../../css/styles.css">
    <link rel="stylesheet" href="../../css/dashboard.css">
    <link rel="stylesheet" href="../../css/alertas.css">
</head>
<body>
    <header class="navbar navbar-expand-lg" id="header">
    </header>

    <div class="container-fluid">
        <div class="row">
            <nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block sidebar collapse">
            </nav>

            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1 class="h2">Alertas Inteligentes</h1>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <div class="btn-group me-2">
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="marcarTodosLidos">Marcar todos como lidos</button>
                            <button type="button" class="btn btn-sm btn-outline-secondary" id="configurarAlertas" data-bs-toggle="modal" data-bs-target="#modalConfiguracaoAlertas">Configurar Alertas</button>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="dropdownFiltro" data-bs-toggle="dropdown" aria-expanded="false">
                                <i data-feather="filter"></i>
                                Filtrar
                            </button>
                            <ul class="dropdown-menu" aria-labelledby="dropdownFiltro">
                                <li><a class="dropdown-item" href="#" data-filter="all">Todos</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="high">Alta Prioridade</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="medium">Média Prioridade</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="low">Baixa Prioridade</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="info">Informativo</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#" data-filter="unread">Não lidos</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="read">Lidos</a></li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Resumo de Alertas -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Total de Alertas</h5>
                                <h2 class="mt-3 mb-3" id="totalAlertas">12</h2>
                                <p class="card-text text-muted">Últimos 30 dias</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Alta Prioridade</h5>
                                <h2 class="mt-3 mb-3 text-danger" id="alertasAlta">3</h2>
                                <p class="card-text text-muted">Requerem atenção imediata</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Não Lidos</h5>
                                <h2 class="mt-3 mb-3 text-primary" id="alertasNaoLidos">5</h2>
                                <p class="card-text text-muted">Pendentes de visualização</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Resolvidos</h5>
                                <h2 class="mt-3 mb-3 text-success" id="alertasResolvidos">7</h2>
                                <p class="card-text text-muted">Últimos 30 dias</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lista de Alertas -->
                <h4 class="mb-3">Alertas Recentes</h4>
                <div class="row mb-4" id="listaAlertas">
                    <!-- Os alertas serão inseridos aqui via JavaScript -->
                </div>

                <!-- Configurações de Alertas -->
                <h4 class="mb-3 mt-5">Configurações de Alertas</h4>
                <div class="row mb-4">
                    <div class="col-md-4 mb-4">
                        <div class="config-card">
                            <div class="config-icon">
                                <i data-feather="trending-down"></i>
                            </div>
                            <h5 class="config-title">Alertas de Desempenho</h5>
                            <p class="config-description">Receba notificações quando o desempenho de vendas estiver abaixo do esperado.</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alertaDesempenho" checked>
                                <label class="form-check-label" for="alertaDesempenho">Ativado</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="config-card">
                            <div class="config-icon">
                                <i data-feather="target"></i>
                            </div>
                            <h5 class="config-title">Alertas de Metas</h5>
                            <p class="config-description">Seja notificado sobre o progresso das metas e prazos próximos.</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alertaMetas" checked>
                                <label class="form-check-label" for="alertaMetas">Ativado</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="config-card">
                            <div class="config-icon">
                                <i data-feather="users"></i>
                            </div>
                            <h5 class="config-title">Alertas de Equipe</h5>
                            <p class="config-description">Receba alertas sobre o desempenho da equipe e necessidades de intervenção.</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alertaEquipe" checked>
                                <label class="form-check-label" for="alertaEquipe">Ativado</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="config-card">
                            <div class="config-icon">
                                <i data-feather="flag"></i>
                            </div>
                            <h5 class="config-title">Alertas de Desafios</h5>
                            <p class="config-description">Seja informado sobre o progresso dos desafios e participação dos vendedores.</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alertaDesafios" checked>
                                <label class="form-check-label" for="alertaDesafios">Ativado</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="config-card">
                            <div class="config-icon">
                                <i data-feather="gift"></i>
                            </div>
                            <h5 class="config-title">Alertas de Recompensas</h5>
                            <p class="config-description">Receba notificações sobre resgates de recompensas e estoque baixo.</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alertaRecompensas" checked>
                                <label class="form-check-label" for="alertaRecompensas">Ativado</label>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="config-card">
                            <div class="config-icon">
                                <i data-feather="trending-up"></i>
                            </div>
                            <h5 class="config-title">Alertas de Tendências</h5>
                            <p class="config-description">Seja alertado sobre tendências importantes e oportunidades identificadas.</p>
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="alertaTendencias" checked>
                                <label class="form-check-label" for="alertaTendencias">Ativado</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Frequência de Notificações -->
                <h4 class="mb-3 mt-4">Frequência de Notificações</h4>
                <div class="row mb-5">
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Notificações por E-mail</h5>
                                <div class="mb-3">
                                    <label for="emailFrequencia" class="form-label">Frequência</label>
                                    <select class="form-select" id="emailFrequencia">
                                        <option value="imediato">Imediato (para alta prioridade)</option>
                                        <option value="diario" selected>Resumo Diário</option>
                                        <option value="semanal">Resumo Semanal</option>
                                        <option value="nunca">Nunca</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="emailPrioridade" class="form-label">Prioridade Mínima</label>
                                    <select class="form-select" id="emailPrioridade">
                                        <option value="high">Alta</option>
                                        <option value="medium" selected>Média</option>
                                        <option value="low">Baixa</option>
                                        <option value="info">Informativo</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card">
                            <div class="card-body">
                                <h5 class="card-title">Notificações no Sistema</h5>
                                <div class="mb-3">
                                    <label for="sistemaPrioridade" class="form-label">Prioridade Mínima</label>
                                    <select class="form-select" id="sistemaPrioridade">
                                        <option value="high">Alta</option>
                                        <option value="medium">Média</option>
                                        <option value="low" selected>Baixa</option>
                                        <option value="info">Informativo</option>
                                    </select>
                                </div>
                                <div class="form-check mt-3">
                                    <input class="form-check-input" type="checkbox" id="notificacaoSom" checked>
                                    <label class="form-check-label" for="notificacaoSom">
                                        Ativar som para notificações
                                    </label>
                                </div>
                                <div class="form-check mt-2">
                                    <input class="form-check-input" type="checkbox" id="notificacaoDesktop" checked>
                                    <label class="form-check-label" for="notificacaoDesktop">
                                        Ativar notificações desktop
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal de Detalhes do Alerta -->
    <div class="modal fade" id="modalDetalhesAlerta" tabindex="-1" aria-labelledby="modalDetalhesAlertaLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalDetalhesAlertaLabel">Detalhes do Alerta</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="alert-meta mb-3">
                        <span class="alert-badge" id="detalhesPrioridade">Alta</span>
                        <span class="alert-time" id="detalhesData">15/05/2023 - 14:30</span>
                    </div>
                    <h4 id="detalhesTitulo">Título do Alerta</h4>
                    <p id="detalhesMensagem">Mensagem detalhada do alerta.</p>
                    
                    <div class="card mb-3">
                        <div class="card-header">
                            Informações Adicionais
                        </div>
                        <div class="card-body">
                            <div class="row">
                                <div class="col-md-6">
                                    <p><strong>Categoria:</strong> <span id="detalhesCategoria">Desempenho</span></p>
                                    <p><strong>Origem:</strong> <span id="detalhesOrigem">Sistema</span></p>
                                </div>
                                <div class="col-md-6">
                                    <p><strong>ID:</strong> <span id="detalhesId">A12345</span></p>
                                    <p><strong>Status:</strong> <span id="detalhesStatus">Não resolvido</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="detalhesConteudo">
                        <!-- Conteúdo específico do alerta será inserido aqui -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                    <button type="button" class="btn btn-primary" id="marcarResolvido">Marcar como Resolvido</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Configuração de Alertas -->
    <div class="modal fade" id="modalConfiguracaoAlertas" tabindex="-1" aria-labelledby="modalConfiguracaoAlertasLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalConfiguracaoAlertasLabel">Configuração de Alertas</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h6 class="mb-3">Limiares de Alerta</h6>
                    
                    <div class="mb-3">
                        <label for="limiarDesempenho" class="form-label">Desempenho de Vendas (%)</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="limiarDesempenho" value="80">
                            <span class="input-group-text">%</span>
                        </div>
                        <div class="form-text">Alerta quando o desempenho estiver abaixo deste percentual da meta.</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="limiarEstoque" class="form-label">Estoque de Recompensas</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="limiarEstoque" value="5">
                            <span class="input-group-text">unidades</span>
                        </div>
                        <div class="form-text">Alerta quando o estoque estiver abaixo deste valor.</div>
                    </div>
                    
                    <div class="mb-3">
                        <label for="limiarPrazo" class="form-label">Prazo de Metas</label>
                        <div class="input-group">
                            <input type="number" class="form-control" id="limiarPrazo" value="7">
                            <span class="input-group-text">dias</span>
                        </div>
                        <div class="form-text">Alerta quando o prazo estiver a menos dias do vencimento.</div>
                    </div>
                    
                    <h6 class="mb-3 mt-4">Canais de Notificação</h6>
                    
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="canalEmail" checked>
                        <label class="form-check-label" for="canalEmail">
                            E-mail
                        </label>
                    </div>
                    
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="canalSistema" checked>
                        <label class="form-check-label" for="canalSistema">
                            Sistema
                        </label>
                    </div>
                    
                    <div class="form-check mb-2">
                        <input class="form-check-input" type="checkbox" id="canalSMS">
                        <label class="form-check-label" for="canalSMS">
                            SMS
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="salvarConfiguracoes">Salvar Configurações</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons@4.28.0/dist/feather.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../../js/auth.js"></script>
    <script src="../../js/notifications.js"></script>
    <script src="../../js/gestor/alertas.js"></script>
    <script src="../../js/gestor/template/header.js"></script>
    <script src="../../js/gestor/template/menu-gestor.js"></script>
</body>
</html>